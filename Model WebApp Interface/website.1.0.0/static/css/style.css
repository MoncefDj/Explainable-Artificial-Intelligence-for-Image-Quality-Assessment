/* static/css/style.css */
:root {
    --primary-color: #007bff; 
    --secondary-color: #6c757d; 
    --light-gray: #f8f9fa;
    --dark-text: #212529;
    --bs-body-font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    
    /* Light Theme Variables */
    --bs-body-bg-light: #eef1f5; 
    --bs-body-color-light: var(--dark-text);
    --card-bg-light: #ffffff;
    --card-border-light: #e0e0e0;
    --text-muted-light: #5a6268;
    --section-title-border-light: #e9ecef;
    --report-pane-bg-light: #fff;
    --report-pane-border-light: #dee2e6;
    --latex-renderable-bg-light: #fdfdff;
    --latex-renderable-border-light: #e0e7ef;
    --latex-renderable-color-light: #2c3e50;
    --input-bg-light: #fff;
    --input-color-light: var(--dark-text);
    --input-border-light: #ced4da;
    --navbar-bg-light: #343a40;
    --navbar-border-light: var(--primary-color);
    --footer-bg-light: #343a40;
    --footer-text-light: #f8f9fa;
    --code-bg-light: #f0f0f0; /* Light gray for code blocks */
    --code-border-light: #ddd;


    /* Dark Theme Variables */
    --bs-body-bg-dark: #121212; 
    --bs-body-color-dark: #e0e0e0; 
    --card-bg-dark: #1e1e1e; 
    --card-border-dark: #333333;
    --text-muted-dark: #888888;
    --section-title-border-dark: #444444;
    --report-pane-bg-dark: #1e1e1e;
    --report-pane-border-dark: #333333;
    --latex-renderable-bg-dark: #222225;
    --latex-renderable-border-dark: #38383b;
    --latex-renderable-color-dark: #cccccc;
    --input-bg-dark: #2a2a2e;
    --input-color-dark: #e0e0e0;
    --input-border-dark: #444444;
    --navbar-bg-dark: #101010; 
    --navbar-border-dark: var(--primary-color);
    --footer-bg-dark: #101010;
    --footer-text-dark: #a0a0a0;
    --code-bg-dark: #2d2d2d; /* Darker gray for code blocks in dark mode */
    --code-border-dark: #444;
}

.navbar-brand .site-logo {
    /* You can add specific styling if needed, but width/height in HTML usually suffice */
    /* vertical-align: middle; */ /* If vertical alignment is off */
    border-radius: 3px; /* Optional: slightly rounded corners for the logo */
}


html, body { height: 100%; }
body { font-family: var(--bs-body-font-family); background-color: var(--bs-body-bg-light); color: var(--bs-body-color-light); display: flex; flex-direction: column; min-height: 100vh; transition: background-color 0.3s ease, color 0.3s ease; }

/* Dark Mode Styles */
body[data-bs-theme="dark"] { background-color: var(--bs-body-bg-dark); color: var(--bs-body-color-dark); }
body[data-bs-theme="dark"] .navbar { background-color: var(--navbar-bg-dark) !important; border-bottom-color: var(--navbar-border-dark); }
body[data-bs-theme="dark"] .navbar-brand { color: #f8f9fa; }
body[data-bs-theme="dark"] .app-title { color: #e9ecef !important; }
body[data-bs-theme="dark"] .page-subtitle, body[data-bs-theme="dark"] .processing-title,
body[data-bs-theme="dark"] .controls-card .form-label, body[data-bs-theme="dark"] .image-display-card h5,
body[data-bs-theme="dark"] .score-card .card-title, body[data-bs-theme="dark"] .text-muted { color: var(--text-muted-dark) !important; }
body[data-bs-theme="dark"] .section-title { color: var(--primary-color) !important; border-bottom-color: var(--section-title-border-dark); }
body[data-bs-theme="dark"] .controls-card, body[data-bs-theme="dark"] .results-section,
body[data-bs-theme="dark"] .image-display-card, body[data-bs-theme="dark"] .score-card,
body[data-bs-theme="dark"] #textualAnalysis .tab-content .report-pane { background-color: var(--card-bg-dark); border-color: var(--card-border-dark) !important; box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
body[data-bs-theme="dark"] .form-control { background-color: var(--input-bg-dark); color: var(--input-color-dark); border-color: var(--input-border-dark); }
body[data-bs-theme="dark"] .form-control::placeholder { color: #777; }
body[data-bs-theme="dark"] .form-check-input:not(:checked) { background-color: #444; border-color: #555; }
body[data-bs-theme="dark"] .latex-renderable { background-color: var(--latex-renderable-bg-dark); border-color: var(--latex-renderable-border-dark); color: var(--latex-renderable-color-dark); }
body[data-bs-theme="dark"] .nav-pills .nav-link { color: #a0cfff; }
body[data-bs-theme="dark"] .nav-pills .nav-link.active { color: #fff; background-color: var(--primary-color); }
body[data-bs-theme="dark"] .nav-pills .nav-link:not(.active):hover { background-color: #3a3a3c; }
body[data-bs-theme="dark"] .progress { background-color: #3a3a3c; }
body[data-bs-theme="dark"] hr.results-divider { border-top-color: #495057; }
body[data-bs-theme="dark"] .alert-info { background-color: #0a2d4a; color: #9ccaf0; border-color: #103d60; }
body[data-bs-theme="dark"] .footer-custom { background-color: var(--footer-bg-dark) !important; color: var(--footer-text-dark) !important;}
body[data-bs-theme="dark"] #darkModeToggle.btn-outline-light { color: var(--bs-body-bg-dark); background-color: var(--light-gray); border-color: var(--light-gray); }
body[data-bs-theme="dark"] #darkModeToggle.btn-outline-light:hover { color: var(--dark-text); background-color: #e2e6ea; border-color: #dae0e5; }
body[data-bs-theme="dark"] .latex-renderable pre code { background-color: var(--code-bg-dark) !important; border: 1px solid var(--code-border-dark) !important; }
body[data-bs-theme="dark"] .latex-renderable code:not(pre > code) { background-color: var(--code-bg-dark) !important; }


.main-content { flex: 1 0 auto; }
.navbar { background-color: var(--navbar-bg-light) !important; border-bottom: 3px solid var(--navbar-border-light); }
.navbar-brand { font-weight: 600; font-size: 1.6rem; }
.navbar-brand .fa-camera-retro { color: var(--primary-color); }
.app-title { color: #343a40; font-weight: 600; letter-spacing: -1px; }
.page-subtitle { font-size: 1.15rem; color: var(--text-muted-light); }
.controls-card { background-color: var(--card-bg-light); border: 1px solid var(--card-border-light); }
.controls-card .form-label { font-weight: 500; color: #495057; margin-bottom: 0.3rem; }
.controls-card .form-control-lg { font-size: 1rem; border-radius: 0.3rem; background-color: var(--input-bg-light); color: var(--input-color-light); border-color: var(--input-border-light); }
.controls-card .btn-lg { padding: 0.8rem 1.5rem; font-size: 1.05rem; font-weight: 500; border-radius: 0.3rem; transition: all 0.2s ease-in-out; }
.controls-card .btn-lg:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2); }
.control-switch-wide { display: flex; align-items: center; }
.control-switch-wide .form-check-input { width: 3em; height: 1.5em; margin-top: 0; margin-right: 0.75em; }
.control-switch-wide .form-check-label{ cursor: pointer; font-size: 1rem; }
#llmAvailabilityStatus { font-size: 0.8rem; }
#progressSection h3.processing-title { font-weight: 400; color: #343a40; font-size: 1.5rem; }
.progress { border-radius: 0.3rem; }
.progress-bar { background-color: var(--primary-color); transition: width 0.2s ease-out, background-color 0.3s ease; }
.progress-bar.bg-danger { background-color: #dc3545 !important; }
#progressStatusText { font-size: 0.9rem; }
.results-divider { border-top: 1px solid #ced4da; }
.results-section { background-color: var(--card-bg-light); padding: 2.5rem; border-radius: 0.5rem; box-shadow: 0 6px 20px rgba(0,0,0,0.06); margin-bottom: 3rem !important; }
.section-title { color: var(--primary-color); font-weight: 500; font-size: 1.75rem; padding-bottom: 0.75rem; margin-bottom: 2rem; border-bottom: 2px solid var(--primary-color); display: inline-block; }
.section-title i { margin-right: 0.5rem; }
.score-card .card-title { font-size: 1rem; font-weight: 500; margin-bottom: 0.5rem; }
.score-card .display-3 { margin-bottom: 0.25rem; }
.score-card small { font-size: 0.9rem; }
.image-display-card { background-color: var(--light-gray); border: 1px solid #dee2e6; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
.image-display-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
.image-display-card img { max-width: 100%; height: 256px; object-fit: contain; background-color: #fff; padding: 0.3rem; margin-top: 0.5rem; border: 1px solid #ced4da; }
.image-display-card h5 { font-size: 0.95rem; font-weight: 500; margin-bottom: 0.25rem; color: #495057; }
#textualAnalysis .nav-pills .nav-link { color: var(--primary-color); font-weight: 500; border-radius: 0.3rem; margin: 0 0.25rem; transition: all 0.2s ease; }
#textualAnalysis .nav-pills .nav-link.active { color: #fff; background-color: var(--primary-color); }
#textualAnalysis .nav-pills .nav-link:not(.active):hover { background-color: #e9ecef; }
#textualAnalysis .tab-content .report-pane { background-color: var(--report-pane-bg-light); border: 1px solid var(--report-pane-border-light); min-height: 300px; }

.latex-renderable { background-color: var(--latex-renderable-bg-light); border: 1px solid var(--latex-renderable-border-light); padding: 20px; border-radius: 5px; white-space: pre-wrap; word-break: break-word; max-height: 450px; overflow-y: auto; font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 0.95em; line-height: 1.7; color: var(--latex-renderable-color-light); }
.latex-renderable .mjx-chtml { font-size: 100% !important; line-height: normal !important; }
/* Markdown generated elements styling */
.latex-renderable h1, .latex-renderable h2, .latex-renderable h3,
.latex-renderable h4, .latex-renderable h5, .latex-renderable h6 { margin-top: 1.2em; margin-bottom: 0.6em; font-weight: 600; color: inherit; }
.latex-renderable p { margin-bottom: 1rem; }
.latex-renderable ul, .latex-renderable ol { padding-left: 2em; margin-bottom: 1rem; }
.latex-renderable li { margin-bottom: 0.3rem; }
.latex-renderable strong { font-weight: 600; } /* Use default bold from browser/bootstrap */
.latex-renderable em { font-style: italic; }
.latex-renderable hr { margin-top: 1.5rem; margin-bottom: 1.5rem; border: 0; border-top: 1px solid rgba(0,0,0,0.1); }
body[data-bs-theme="dark"] .latex-renderable hr { border-top-color: rgba(255,255,255,0.1); }
.latex-renderable blockquote { padding: 10px 20px; margin: 0 0 20px; font-size: 1rem; border-left: 5px solid #eee; color: #666; }
body[data-bs-theme="dark"] .latex-renderable blockquote { border-left-color: #444; color: #aaa;}
/* Code blocks styling */
.latex-renderable pre {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
    border-radius: 0.3rem;
    background: var(--code-bg-light); /* Default light mode code bg */
    border: 1px solid var(--code-border-light);
}
.latex-renderable pre code.hljs { /* Specific to highlight.js output */
    padding: 0; /* hljs might add its own padding, reset if needed */
    background: transparent !important; /* Ensure hljs theme doesn't override pre background */
    color: inherit; /* Inherit color from pre for hljs syntax */
}
/* Inline code */
.latex-renderable code:not(pre > code) {
    padding: .2em .4em;
    margin: 0;
    font-size: 85%;
    background-color: var(--code-bg-light);
    border-radius: 3px;
    border: 1px solid var(--code-border-light);
}


.footer-custom { background-color: var(--footer-bg-light); color: var(--footer-text-light); font-size: 0.9em; padding: 1.5rem 0; }
@media (max-width: 768px) {
    .main-content { padding-top: 4.5rem; } .app-title { font-size: 1.8rem; } .page-subtitle { font-size: 1rem; }
    .display-3 { font-size: 2.5rem; } .controls-card, .results-section { padding: 1.25rem; }
    .section-title { font-size: 1.4rem; margin-bottom: 1.25rem; }
    .nav-pills .nav-link { font-size: 0.85rem; padding: 0.4rem 0.6rem; }
    .image-display-card img { height: 200px; }
}
#analyzeButtonText { margin-right: 0.5em; }
#analyzeButton .spinner-border { width: 1.25rem; height: 1.25rem; border-width: .2em; }
#darkModeToggle .fa-sun { display: none; } 
body[data-bs-theme="dark"] #darkModeToggle .fa-moon { display: none; }
body[data-bs-theme="dark"] #darkModeToggle .fa-sun { display: inline-block; }